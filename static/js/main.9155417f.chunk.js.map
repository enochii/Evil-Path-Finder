{"version":3,"sources":["components/Board/Board.scss","components/Item/Item.scss","components/ModalInfo/ModalInfo.scss","components/Container/Container.scss","components/Editor/Editor.scss","constants.js","algorithms/Timer.js","algorithms/pathFinder.js","algorithms/dijkstra.js","algorithms/bellmanFord.js","algorithms/AStar.js","algorithms/dfs.js","algorithms/bfs.js","algorithms/index.js","components/Editor/evil.js","helper.js","Provider.jsx","components/Header/CustomDrop.jsx","components/Header/AlgoSelector.jsx","mapGeneration/mgBase.js","mapGeneration/StairDemo.js","mapGeneration/RecursiveDivision.js","mapGeneration/HorizontalRecursion.js","mapGeneration/VerticalRecursion.js","components/Header/MapSelector.jsx","components/Header/SizeSlider.jsx","components/Header/SpeedSlider.jsx","components/Header/Header.jsx","components/Item/Item.jsx","components/Board/Board.jsx","components/ModalInfo/ModalInfo.jsx","components/ModalError/ModalError.jsx","components/Editor/AceWrapper.jsx","components/Editor/Editor.jsx","components/Header/Switcher.jsx","components/Container/Container.jsx","App.js","index.js","styles/_variables.scss","styles/circle.svg","components/Header/Header.scss"],"names":["module","exports","Timer","callback","delay","pause","clearTimeout","id","remain","Date","now","start","resume","setTimeout","destroy","this","BOARD_ROW","Number","Styles","boardRow","BOARD_COL","boardCol","INITIAL_COLOR","initialColor","VISITED_COLOR","visitedColor","CLICKED_COLOR","clickedColor","FIXED_COLOR","fixedColor","SHORTEST_COLOR","shortestColor","WALL_COLOR","wallColor","ORGINAL_ALGOS","KEYS","i","j","uuidv4","ITEM_VISITED","BOARD","color","visit","PathFinder","begin","end","updateItem","board","_init","dist","Array","length","prev","Infinity","x","y","paintShortestPath","console","log","path","push","tempX","tempY","timers","nx","ny","state","currentX","currentY","pp","forEach","timer","checked","index","dx","DX","dy","DY","Dijkstra","args","execute","pq","queue","d","current","dequeue","currentD","visitItem","clear","nextX","nextY","canItemVisit","alert","clearTimers","PriorityQueue","comparator","a","b","BellmanFord","_relax","timeFactor","find","time","k","vertex","relaxedResult","Astar","_h","Math","abs","opened","fBegin","f","peek","g","nextF","fill","Dfs","_dfs","visited","Bfs","undefined","q","enqueue","isEmpty","Queue","pathfinderMap","AStar","ALGO_LIST","localItemExist","key","val","localStorage","getItem","runCodeWrapper","code","wrapped_code","cls","Function","name","toUpperCase","storeLocal","error","addAlgo","saveInitCode","codes","split","noComments","replace","charCodeAt","join","preprocessCode","modifyLocalAlgoList","delegate","algoList","JSON","parse","setItem","stringify","addLocalAlgoList","concat","INTI_CODE_KEY","pointEqual","obj","Context","createContext","Provider","children","useState","isPathExist","setIsPathExist","isVisualized","setIsVisualized","isHelped","setIsHelped","isCoding","setIsCoding","algorithms","useRef","round","setItemCache","pathFinder","setBoardSizeHook","hasAlgo","includes","addAlgoToHeader","ridx","cidx","type","row","item","algoNames","getLocalAlgoList","algo","succ","value","clearPath","updateBoardSize","br","bc","createArray","arr","arguments","prototype","slice","call","apply","setRow","setCol","CustomDrop","props","itemRenderer","itemIndex","methods","options","valueField","onClick","addItem","className","style","margin","float","labelField","deleteAlgoByName","closeOnSelect","dropdownHeight","onAlgoChange","indexOf","splice","rmLocalAlgoList","maxWidth","StyledSelect","disabled","dropdownHandle","handle","direction","values","opt","onChange","dropdownPosition","React","Component","styled","Select","dropdownRenderer","AlgoSelector","context","useContext","listItems","element","reverse","title","MgBase","updateItem_","r","c","factor","cnt","Stair","excute","stairDemo_","currentIdX","currentIdY","canSetWall","Recursion","orientation_","VER","recursiveDivisionMaze_","sparseFactor_","rowStart","rowEnd","colStart","colEnd","orientation","surroundingWalls","HOR","possibleRows","number","possibleCols","currentRow","floor","random","colRandom","randomColIndex","currentCol","rowRandom","wall","HorizontalRecursion","VerticalRecursion","MapSelector","mapAlgos","MapGenerationMap","map","algo_name","e","algoName","target","mgalgo","SingleSilder","Slider","defaultValue","defVal","aria-labelledby","step","marks","min","max","valueLabelDisplay","handleChange","SizeSlider","Typography","gutterBottom","event","newValue","SpeedSlider","require","DELAY_FAST","onDelayChange","Header","setType","setPause","test","nv","isPossiblePath","resumeTimers","stopTimers","Item","num","setNum","useEffect","animationMap","getItemSize","data-type","data-ridx","data-cidx","fontSize","String","backgroundColor","height","width","animationName","backgroundImage","link","Background","getBgImage","Board","setBoardRow","setBoardCol","clicking","setClicking","dragging","setDragging","clickPos","changeColor","mouseMove","dataset","onMouseDown","onMouseUp","onMouseMove","formerX","formerY","next","role","tabIndex","col","ModalInfo","onHelpClose","isOpen","contentLabel","onRequestClose","ModalError","isErrorOpen","onErrorClose","getEditedCode","init_code","AceWrapper","codeText","setState","mode","theme","editorProps","$blockScrolling","setOptions","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets","onSubmit","CodeEditor","onEditorClose","Switcher_","withStyles","root","padding","spacing","switchBase","transform","palette","common","white","opacity","border","thumb","track","borderRadius","grey","transition","transitions","create","focusVisible","classes","Switch","focusVisibleClassName","disableRipple","Switcher","FormControlLabel","control","enableDiagonal","label","labelPlacement","Modal","setAppElement","Container","setIsErrorOpen","property","content","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9155417f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};","import uuidv4 from 'uuid/v4';\r\nimport Styles from 'styles/_variables.scss';\r\n\r\n// Board Size(初始)\r\nexport const BOARD_ROW = Number(Styles.boardRow);\r\nexport const BOARD_COL = Number(Styles.boardCol);\r\n\r\n// Color\r\nexport const INITIAL_COLOR = Styles.initialColor;\r\nexport const VISITED_COLOR = Styles.visitedColor;\r\nexport const CLICKED_COLOR = Styles.clickedColor;\r\nexport const FIXED_COLOR = Styles.fixedColor;\r\nexport const SHORTEST_COLOR = Styles.shortestColor;\r\nexport const WALL_COLOR = Styles.wallColor;\r\n// export const COLOR_TYPES = [\r\n//   'initial',\r\n//   'visited',\r\n//   'clicked',\r\n//   'fixed',\r\n//   'shortest',\r\n// ];\r\n\r\nexport const BOARD_HEIGHT = 60;\r\n\r\n// algorithm\r\nexport const DIJKSTRA = 'DIJKSTRA';\r\nexport const BELLMAN_FORD = 'BELL_FORD';\r\nexport const A_STAR = 'ASTAR';\r\nexport const DFS = 'DFS';\r\nexport const BFS = 'BFS';\r\n\r\nexport const ORGINAL_ALGOS = [DIJKSTRA ,BELLMAN_FORD, BFS, DFS, A_STAR];\r\n\r\n// uuid\r\nexport const KEYS = [];\r\nfor (let i = 0; i < BOARD_ROW; i++) {\r\n  KEYS[i] = [];\r\n  for (let j = 0; j < BOARD_COL; j++) {\r\n    KEYS[i][j] = uuidv4();\r\n  }\r\n}\r\n\r\n// Item state\r\nexport const ITEM_FIXED = 'ITEM_FIXED';\r\nexport const ITEM_INITIAL = 'ITEM_INITIAL';\r\nexport const ITEM_VISITED = 'ITEM_VISITED';\r\nexport const ITEM_CLICKED = 'ITEM_CLICKED';\r\nexport const ITEM_SHORTEST = 'ITEM_SHORTEST';\r\nexport const ITEM_WALL = 'ITEM_WALL';\r\n\r\n// Delay\r\nexport const DELAY_SLOWEST = 400;\r\nexport const DELAY_SLOW = 300;\r\nexport const DELAY_NORMAL = 200;\r\nexport const DELAY_FAST = 80;\r\nexport const DELAY_FASTEST = 50;\r\n\r\n// Board\r\nexport const BOARD = [];\r\nfor (let i = 0; i < BOARD_ROW; i++) {\r\n  BOARD[i] = [];\r\n  for (let j = 0; j < BOARD_COL; j++) {\r\n    BOARD[i][j] = {\r\n      color: INITIAL_COLOR,\r\n      visit: false,\r\n    };\r\n  }\r\n}\r\n","// @flow\n\ntype TimerConstructorType = {\n  callback: () => void,\n  delay: number,\n};\n\nexport default class Timer {\n  id: TimeoutID;\n\n  callback: () => void;\n\n  delay: number;\n\n  remain: number;\n\n  start: number;\n\n  constructor({ callback, delay }: TimerConstructorType) {\n    this.id = setTimeout(callback, delay);\n    this.callback = callback;\n    this.delay = delay;\n    this.remain = delay;\n    this.start = Date.now();\n  }\n\n  pause = () => {\n    clearTimeout(this.id);\n    this.remain -= Date.now() - this.start;\n  };\n\n  resume = () => {\n    this.start = Date.now();\n    clearTimeout(this.id);\n    this.id = setTimeout(this.callback, this.remain);\n  };\n\n  destroy = () => {\n    clearTimeout(this.id);\n  };\n}\n","// @flow\r\n\r\nimport { ITEM_VISITED, ITEM_SHORTEST, ITEM_CLICKED, ITEM_WALL } from 'constants.js';\r\nimport Timer from './Timer';\r\n\r\nexport type ConstructorType = {\r\n  begin: {| x: number, y: number |},\r\n  end: {| x: number, y: number |},\r\n  updateItem: (number, number, string, ?number) => void,\r\n  board: Array<Array<string>>,\r\n};\r\n\r\nexport default class PathFinder {\r\n  begin: {| x: number, y: number |};\r\n\r\n  end: {| x: number, y: number |};\r\n\r\n  updateItem: (number, number, string, ?number) => void;\r\n\r\n  board: Array<Array<string>>;\r\n\r\n  timers: Array<Timer>;\r\n\r\n  dist: Array<Array<number>>;\r\n\r\n  prev: Array<Array<{| x: number, y: number |}>>;\r\n\r\n  static dx: Array<number>;\r\n\r\n  static dy: Array<number>;\r\n  static DX: Array< Array<number> >;\r\n  static DY: Array< Array<number> >;\r\n\r\n  constructor({ begin, end, updateItem, board }: ConstructorType) {\r\n    this.begin = begin;\r\n    this.end = end;\r\n    this.updateItem = updateItem;\r\n    this.board = board;\r\n    this.timers = [];\r\n    this._init();\r\n  }\r\n\r\n  static DX = [[-1, 1, 0, 0], [-1,-1, 1, -1, 0, 1, 0, 1]];\r\n  static DY = [[0, 0, -1, 1], [0, -1, 0, 1, -1, 1, 1, -1]];\r\n\r\n  static dx = [-1, 1, 0, 0];\r\n\r\n  static dy = [0, 0, -1, 1];\r\n\r\n  // 是否允许对角线\r\n\tstatic enableDiagonal(checked){\r\n\t\tvar index = checked? 1:0;\r\n\t\tPathFinder.dx = PathFinder.DX[index];\r\n\t\tPathFinder.dy = PathFinder.DY[index];\r\n  \t}\r\n\r\n  _init = () => {\r\n    this.dist = new Array(this.board.length);\r\n    this.prev = new Array(this.board.length);\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      this.dist[i] = [];\r\n      this.prev[i] = [];\r\n      for (let j = 0; j < this.board[0].length; j++) {\r\n        this.dist[i][j] = Infinity;\r\n        this.prev[i][j] = { x: -1, y: -1 };\r\n      }\r\n    }\r\n    this.dist[this.begin.x][this.begin.y] = 0;\r\n  };\r\n\r\n  canItemVisit(nx, ny) {\r\n    var state = this.board[nx][ny];\r\n    return state != ITEM_CLICKED && state != ITEM_WALL;\r\n  }\r\n\r\n  visitItem(nx, ny, delay=0) {\r\n\tthis.board[nx][ny] = ITEM_VISITED;\r\n\tthis.updateItem(nx, ny, ITEM_VISITED, delay);\r\n  }\r\n\r\n  dumpPath(currentX, currentY) {\r\n\twhile(currentX != -1) {\r\n\t\tvar pp = this.prev[currentX][currentY];\r\n\t\tconsole.log(pp);\r\n\t\tcurrentX = pp.x;\r\n\t\tcurrentY = pp.y;\r\n\t  }\r\n  }\r\n  \r\n  clearTimers() {\r\n    this.timers.forEach((timer: Timer) => {\r\n      timer.destroy();\r\n    });\r\n    this.timers = [];\r\n  }\r\n\r\n  stopTimers() {\r\n    this.timers.forEach(timer => timer.pause());\r\n  }\r\n\r\n  resumeTimers() {\r\n    this.timers.forEach(timer => timer.resume());\r\n  }\r\n\r\n  paintShortestPath = () => {\r\n\tconst { begin, end, prev, updateItem } = this;\r\n\tconsole.log(this.prev);\r\n\r\n    const path: Array<{| x: number, y: number |}> = [];\r\n    let { x } = end;\r\n    let { y } = end;\r\n\r\n    while (prev[x][y].x !== -1 && prev[x][y].y !== -1) {\r\n      path.push({ x, y });\r\n      const tempX = x;\r\n      const tempY = y;\r\n      x = prev[tempX][tempY].x;\r\n      y = prev[tempX][tempY].y;\r\n    }\r\n    path.push({ x: begin.x, y: begin.y });\r\n\r\n    for (let i = path.length - 1; i >= 0; i--) {\r\n      x = path[i].x;\r\n      y = path[i].y;\r\n      updateItem(x, y, ITEM_SHORTEST, path.length - i);\r\n    }\r\n  };\r\n}\r\n","// @flow\r\n\r\nimport PriorityQueue from 'js-priority-queue';\r\nimport {   ITEM_CLICKED, ITEM_VISITED } from 'constants.js';\r\nimport PathFinder, { type ConstructorType } from './pathFinder';\r\n\r\n// 无类型注解\r\nexport default class Dijkstra extends PathFinder {\r\n  constructor(args) {\r\n    super(args);\r\n    this.pq = new PriorityQueue({ comparator: (a, b) => a.d - b.d });\r\n  }\r\n\r\n  // 奇形怪状的 path 调试贼久，以为是 Bug \r\n  execute = () => {\r\n    const { pq, dist, prev, board, begin, end, updateItem } = this;\r\n\r\n    pq.queue({ x: begin.x, y: begin.y, d: 0 });\r\n    dist[begin.x][begin.y] = 0;\r\n    let find = false;\r\n\r\n    var cnt = 0;\r\n    while (pq.length) {\r\n      ++cnt;\r\n      // const current: {| x: number, y: number, d: number |} = pq.peek();\r\n      const current = pq.dequeue();\r\n      const currentX = current.x;\r\n      const currentY = current.y;\r\n      const currentD = current.d;\r\n      if(this.board[currentX][currentY] === ITEM_VISITED) {alert(current); continue;}\r\n      else {\r\n        // dijkstra 访问过的点有两层\r\n        // - 访问过\r\n        // - 已经是最近的点\r\n        // 如果还没访问过，现在这是最近的点\r\n        this.visitItem(currentX, currentY, currentD);\r\n      }\r\n      if (currentX === end.x && currentY === end.y) {\r\n        find = true;\r\n        // console.log(pq);\r\n        pq.clear();\r\n        // console.log(cnt);\r\n        // console.log(dist);\r\n        return true;\r\n      }\r\n\r\n      for (let i = 0; i < PathFinder.dx.length; i++) {\r\n        var nextX = currentX + PathFinder.dx[i];\r\n        var nextY = currentY + PathFinder.dy[i];\r\n\r\n        if (nextX < 0 || nextX >= this.board.length || nextY < 0 || nextY >= this.board[0].length)\r\n          continue;\r\n        if (\r\n          dist[currentX][currentY] === Infinity ||\r\n          dist[currentX][currentY] + 1 >= dist[nextX][nextY]\r\n        )\r\n          continue;\r\n        if (!this.canItemVisit(nextX, nextY)) continue;\r\n\r\n        // board[nextX][nextY] = ITEM_VISITED;\r\n        // updateItem(nextX, nextY, ITEM_VISITED, currentD);\r\n        prev[nextX][nextY] = {x: currentX, y:currentY, d:currentD+1};\r\n\r\n        dist[nextX][nextY] = dist[currentX][currentY] + 1;\r\n        pq.queue({ x: nextX, y: nextY, d: dist[nextX][nextY] });\r\n      }\r\n\r\n      // if (find) {\r\n      //   pq.clear();\r\n      //   return true;\r\n      // }\r\n    }\r\n    this.clearTimers();\r\n    return false;\r\n  };\r\n}\r\n","// @flow\r\n\r\nimport {   ITEM_VISITED } from 'constants.js';\r\nimport PathFinder from './pathFinder';\r\n\r\nexport default class BellmanFord extends PathFinder {\r\n  _relax = (timeFactor) => {\r\n    const { dist, prev, end, updateItem, board } = this;\r\n    let find = false;\r\n    let time = timeFactor;\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      for (let j = 0; j < this.board[0].length; j++) {\r\n        for (let k = 0; k < PathFinder.dx.length; k++) {\r\n          const nextX = i + PathFinder.dx[k];\r\n          const nextY = j + PathFinder.dy[k];\r\n\r\n          if (\r\n            nextX < 0 ||\r\n            nextX >= this.board.length ||\r\n            nextY < 0 ||\r\n            nextY >= this.board[0].length\r\n          )\r\n            continue;\r\n          if (dist[i][j] === Infinity || dist[i][j] + 1 >= dist[nextX][nextY])\r\n            continue;\r\n          if (!this.canItemVisit(nextX, nextY)) continue;\r\n\r\n          dist[nextX][nextY] = dist[i][j] + 1;\r\n          prev[nextX][nextY] = { x: i, y: j };\r\n\r\n          if (nextX === end.x && nextY === end.y) {\r\n            find = true;\r\n            break;\r\n          }\r\n\r\n          updateItem(nextX, nextY, ITEM_VISITED, time);\r\n          time++;\r\n        }\r\n        if (find) break;\r\n      }\r\n    }\r\n    return { time, find };\r\n  };\r\n\r\n  execute = () => {\r\n    console.log('bellford');\r\n    const { _relax, updateItem, end } = this;\r\n\r\n    let timeFactor = 1;\r\n    let find = false;\r\n    const vertex = this.board.length * this.board[0].length;\r\n    for (let i = 1; i <= vertex - 1; i++) {\r\n      const relaxedResult = _relax(timeFactor);\r\n      timeFactor = relaxedResult.time;\r\n      timeFactor++;\r\n      if (relaxedResult.find) {\r\n        find = true;\r\n        break;\r\n      }\r\n    }\r\n    updateItem(end.x, end.y, ITEM_VISITED, timeFactor);\r\n    if (!find) this.clearTimers();\r\n    return find;\r\n  };\r\n}\r\n","// @flow\r\n\r\nimport PriorityQueue from 'js-priority-queue';\r\nimport {    ITEM_VISITED } from 'constants.js';\r\nimport PathFinder, { type ConstructorType } from './pathFinder';\r\n\r\n// 无类型注解\r\nexport default class Astar extends PathFinder {\r\n  //   opened: undefined;\r\n  \r\n    constructor(args) {\r\n      super(args);\r\n      this.opened = new Array(this.board.length);\r\n      for (let i = 0; i < this.board.length; i++) {\r\n        this.opened[i] = new Array(this.board[0].length).fill(false);\r\n      }\r\n      this.pq = new PriorityQueue({ comparator: (a, b) => a.f - b.f });\r\n    }\r\n  \r\n    _h = (start) => {\r\n      return Math.abs(start.x - this.end.x) + Math.abs(start.y - this.end.y);\r\n    };\r\n  \r\n    execute = () => {\r\n      const { dist, pq, opened, board, updateItem, prev, begin, _h, end } = this;\r\n      const fBegin = _h(begin);\r\n      pq.queue({ x: begin.x, y: begin.y, f: fBegin });\r\n      dist[begin.x][begin.y] = 0;\r\n      opened[begin.x][begin.y] = true;\r\n      console.log(this.opened);\r\n  \r\n      let find = false;\r\n      let timeFactor = 1;\r\n  \r\n      while (pq.length) {\r\n        const current = pq.peek();\r\n        const currentX = current.x;\r\n        const currentY = current.y;\r\n  \r\n        if (currentX === end.x && currentY === end.y) {\r\n          pq.clear();\r\n          find = true;\r\n          break;\r\n        }\r\n  \r\n        opened[currentX][currentY] = false;\r\n        pq.dequeue();\r\n  \r\n        for (let i = 0; i < PathFinder.dx.length; i++) {\r\n          const nextX = currentX + PathFinder.dx[i];\r\n          const nextY = currentY + PathFinder.dy[i];\r\n  \r\n          if (nextX < 0 || nextX >= this.board.length || nextY < 0 || nextY >= this.board[0].length)\r\n            continue;\r\n          if (!this.canItemVisit(nextX, nextY)) continue;\r\n  \r\n          const g = dist[currentX][currentY] + 1;\r\n          const nextF = g + _h({ x: nextX, y: nextY });\r\n  \r\n          if (g < dist[nextX][nextY]) {\r\n            prev[nextX][nextY] = { x: currentX, y: currentY };\r\n            dist[nextX][nextY] = g;\r\n  \r\n            updateItem(nextX, nextY, ITEM_VISITED, timeFactor);\r\n            timeFactor++;\r\n  \r\n            if (opened[nextX][nextY] === false) {\r\n              pq.queue({ x: nextX, y: nextY, f: nextF });\r\n              opened[nextX][nextY] = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (!find) this.clearTimers();\r\n      return find;\r\n    };\r\n  }\r\n  ","// @flow\r\n\r\nimport {   ITEM_VISITED } from 'constants.js';\r\nimport PathFinder, { type ConstructorType } from './pathFinder';\r\n\r\nexport default class Dfs extends PathFinder {\r\n  constructor(args) {\r\n    super(args);\r\n    this.find = false;\r\n    this.visited = [];\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      this.visited[i] = Array(this.board[0].length).fill(false);\r\n    }\r\n  }\r\n\r\n  _dfs = (x, y, timeFactor) => {\r\n    const { prev, end, board, updateItem } = this;\r\n    this.visited[x][y] = true;\r\n\r\n    for (let i = 0; i < PathFinder.dx.length; i++) {\r\n      const nextX = x + PathFinder.dx[i];\r\n      const nextY = y + PathFinder.dy[i];\r\n\r\n      if (nextX < 0 || nextX >= this.board.length || nextY < 0 || nextY >= this.board[0].length)\r\n        continue;\r\n      if (this.visited[nextX][nextY] || !this.canItemVisit(nextX, nextY))\r\n        continue;\r\n\r\n      prev[nextX][nextY] = { x, y };\r\n      updateItem(nextX, nextY, ITEM_VISITED, timeFactor);\r\n\r\n      if (nextX === end.x && nextY === end.y) {\r\n        this.find = true;\r\n        return;\r\n      }\r\n      this._dfs(nextX, nextY, timeFactor + 1);\r\n\r\n      if (this.find) return;\r\n    }\r\n  };\r\n\r\n  execute = () => {\r\n    this._dfs(this.begin.x, this.begin.y, 1);\r\n    if (!this.find) this.clearTimers();\r\n    return this.find;\r\n  };\r\n}\r\n","// @flow\r\n\r\nimport Queue from 'queue-fifo';\r\nimport {    ITEM_VISITED } from 'constants.js';\r\nimport PathFinder, { type ConstructorType } from './pathFinder';\r\n\r\nexport default class Bfs extends PathFinder {\r\n  visited= undefined;\r\n\r\n  queue= undefined;\r\n\r\n  constructor(args) {\r\n    super(args);\r\n    this.visited = [];\r\n    this.q = new Queue();\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      this.visited[i] = Array(this.board[0].length).fill(false);\r\n    }\r\n  }\r\n\r\n  execute = () => {\r\n    const { q, begin, end, visited, board, prev, updateItem } = this;\r\n    q.enqueue({ x: begin.x, y: begin.y });\r\n    visited[begin.x][begin.y] = true;\r\n    let find = false;\r\n    let timeFactor = 1;\r\n\r\n    while (!q.isEmpty()) {\r\n      const current = q.peek();\r\n      q.dequeue();\r\n\r\n      if (current.x === end.x && current.y === end.y) {\r\n        break;\r\n      }\r\n\r\n      for (let i = 0; i < PathFinder.dx.length; i++) {\r\n        const nextX = current.x + PathFinder.dx[i];\r\n        const nextY = current.y + PathFinder.dy[i];\r\n\r\n        if (nextX < 0 || nextX >= this.board.length || nextY < 0 || nextY >= this.board[0].length)\r\n          continue;\r\n        if (visited[nextX][nextY] || !this.canItemVisit(nextX, nextY))\r\n          continue;\r\n\r\n        visited[nextX][nextY] = true;\r\n        prev[nextX][nextY] = { x: current.x, y: current.y };\r\n        updateItem(nextX, nextY, ITEM_VISITED, timeFactor);\r\n        timeFactor++;\r\n        q.enqueue({ x: nextX, y: nextY });\r\n\r\n        if (nextX === end.x && nextY === end.y) {\r\n          find = true;\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!find) this.clearTimers();\r\n    return find;\r\n  };\r\n}\r\n","// @flow\r\n\r\nimport { DIJKSTRA, BELLMAN_FORD, A_STAR, DFS, BFS } from 'constants.js';\r\nimport Dijkstra from './dijkstra';\r\nimport BellmanFord from './bellmanFord';\r\nimport AStar from './AStar';\r\nimport Dfs from './dfs';\r\nimport Bfs from './bfs';\r\n\r\nexport type PathfinderMapType = {\r\n  [key: string]: | typeof Dijkstra\r\n    | typeof BellmanFord\r\n    | typeof AStar\r\n    | typeof Dfs,\r\n};\r\n\r\nconst pathfinderMap: PathfinderMapType = {\r\n  [DIJKSTRA]: Dijkstra,\r\n  [BELLMAN_FORD]: BellmanFord,\r\n  [A_STAR]: AStar,\r\n  [DFS]: Dfs,\r\n  [BFS]: Bfs,\r\n};\r\n\r\nexport default pathfinderMap;\r\n","import PriorityQueue from 'js-priority-queue';\r\nimport Queue from 'queue-fifo';\r\n\r\nimport {BOARD_ROW,BOARD_COL,ITEM_CLICKED,ITEM_VISITED, INITIAL_COLOR,ORGINAL_ALGOS} from '../../constants.js'\r\nimport PathFinder from 'algorithms/pathFinder'\r\nimport pathfinderMap from 'algorithms/index'\r\n\r\n\r\nexport const ALGO_LIST = 'EPF_ALGO_LIST';\r\n\r\nexport function localItemExist(key) {\r\n    var val = localStorage.getItem(key);\r\n    console.log(val===null);\r\n    return !(val === null) && !(val === \"undefined\");\r\n}\r\n\r\n// 单纯的 eval 只能引用局部变量\r\n// function 可以利用绑定\r\n// todo : -> board.length\r\nfunction runCodeWithEnv(obj){\r\n    return Function('\"use strict\";return (' + obj + ')')()(\r\n        PathFinder, BOARD_ROW,BOARD_COL,ITEM_CLICKED,ITEM_VISITED, PriorityQueue,Queue\r\n    );\r\n}\r\n\r\nexport function runCodeWrapper(code) {\r\n    // console.log(code);\r\n    var wrapped_code = 'function(PathFinder,BOARD_ROW,BOARD_COL,ITEM_CLICKED,ITEM_VISITED,PriorityQueue,Queue){'\r\n    + 'return ' + code +';}';\r\n    try{\r\n        var cls = runCodeWithEnv(wrapped_code);\r\n        // name -> cls\r\n        var name = cls.name.toUpperCase();\r\n        pathfinderMap[name] = cls;\r\n        // 这里的名字是正确的，代码也是预处理过的...\r\n        storeLocal(name, code);\r\n\r\n        console.log(cls); \r\n        return name;\r\n    } catch (error) {\r\n        console.log(error);\r\n        alert(error);\r\n        return false;\r\n    }\r\n}\r\n\r\nexport function addAlgo(name, code) {\r\n\r\n    saveInitCode(code); // 保存用户编辑过的代码\r\n    \r\n    // 对代码做预处理\r\n    code = preprocessCode(code);\r\n    console.log(code);\r\n    // 加入 local storage\r\n    // storeLocal(name, code);\r\n    // map\r\n    // setState 让 header 更新\r\n    return runCodeWrapper(code);\r\n}\r\n\r\n// delegate 可以是添加或者删除\r\nfunction modifyLocalAlgoList(name, delegate) {\r\n    // storeLocal(name, code);\r\n    // 加入列表，便于后续的恢复\r\n    if(!localItemExist(ALGO_LIST)) {\r\n        // 初始化一个数组\r\n        var algoList = [];\r\n    } else {\r\n        var algoList = localStorage.getItem(ALGO_LIST);\r\n        // console.log(algoList);\r\n        algoList = JSON.parse(algoList);\r\n    }\r\n    // console.log(algoList);\r\n    // todo?\r\n    algoList = delegate(algoList, name);\r\n    localStorage.setItem(ALGO_LIST, JSON.stringify(algoList));\r\n}\r\n\r\n// 只会在 AceWrapper 被调用！\r\nexport function addLocalAlgoList(name, code) {\r\n    function add(algoList, name) {\r\n        algoList = algoList.concat(name); \r\n        return algoList;\r\n    }\r\n    // todo?\r\n    modifyLocalAlgoList(name, add);\r\n}\r\n// 删除某个算法\r\nexport function rmLocalAlgoList(name, code) {\r\n    function rm(algoList, name) {\r\n        console.log(name);\r\n        var index = algoList.indexOf(name);\r\n        console.log(algoList);\r\n        if(index == -1) {\r\n            console.log(\"You'd better not to remove original ALGO!\");\r\n            // return algoList;\r\n        }\r\n        console.log(index);\r\n        algoList.splice(algoList.indexOf(name), 1);\r\n        // console.log('deleted: ', algoList); \r\n        return algoList;\r\n    }\r\n    // todo?\r\n    modifyLocalAlgoList(name, rm);\r\n}\r\n\r\nfunction storeLocal(name, code) {\r\n    if(!(localStorage.getItem(name) === null)) {\r\n        console.log('update ' + name);\r\n    }\r\n    localStorage.setItem(name, code);\r\n}\r\n\r\nexport function getInitCode() {\r\n    return localStorage.getItem(INTI_CODE_KEY);\r\n}\r\n\r\n// 可以考虑做一个 save 按钮或者 Ctrl+S\r\nexport function saveInitCode(code) {\r\n    storeLocal(INTI_CODE_KEY, code); // 可用于恢复用户编辑过的代码\r\n}\r\n\r\nconst INTI_CODE_KEY = 'init-code';\r\n\r\n// todo: 空格后 再 注释还无法消除\r\n// 直接 抽一个 function isComment(line)\r\nfunction preprocessCode(code :String){\r\n    var codes = code.split('\\n');\r\n    var noComments = [];\r\n\r\n    for(var i=0;i<codes.length;i++) {\r\n        if((codes[i][0] == '/' && codes[i][1] == '/') || allBlank(codes[i])) {\r\n            // console.log(codes[i]);\r\n        } else {\r\n            // console.log('line: ', i+1);\r\n            if(i == 3) console.log(codes[i].length, '(', codes[i].charCodeAt(), ')');\r\n            noComments.push(codes[i]);\r\n        }\r\n    }\r\n    var ret = noComments.join('\\n')\r\n    // console.log(ret);\r\n    return ret;\r\n}\r\n\r\n// todo: 这样可以处理 \\r\\n 和 \\n 应该\r\nfunction allBlank(line) {\r\n    return line.replace(/\\r/g, \"\").length == 0;\r\n}","import { ALGO_LIST, localItemExist } from \"components/Editor/evil\";\r\n\r\nexport function pointEqual(x, y, obj) {\r\n    return x == obj.x && y == obj.y;\r\n}\r\n\r\nexport function beginOrEnd(x, y, begin, end){\r\n    return pointEqual(x, y, begin) || pointEqual(x, y, end);\r\n}\r\n\r\nexport function getLocalAlgoList() {\r\n    try {\r\n        if(!localItemExist(ALGO_LIST)) return [];\r\n        var algoNames = localStorage.getItem(ALGO_LIST);\r\n        algoNames = JSON.parse(algoNames);\r\n        return algoNames;\r\n    } catch {\r\n        return [];\r\n    }\r\n}","// @flow\r\n\r\nimport React, { createContext, useRef, useState, type Node } from 'react';\r\nimport Timer from 'algorithms/Timer';\r\nimport {\r\n  BOARD,\r\n  KEYS,\r\n  DELAY_FAST,\r\n  ITEM_INITIAL,\r\n  ITEM_FIXED,\r\n  ITEM_CLICKED,\r\n  BOARD_ROW,\r\n  BOARD_COL,\r\n  BELLMAN_FORD,\r\n  BFS,\r\n  DFS,\r\n  A_STAR,\r\n  DIJKSTRA,\r\n  ORGINAL_ALGOS,\r\n} from './constants';\r\nimport { ALGO_LIST, localItemExist, runCodeWrapper } from 'components/Editor/evil';\r\nimport { getLocalAlgoList } from 'helper';\r\n\r\ntype PositionType = {| x: number, y: number |};\r\ntype SetItemCacheType = { [key: string]: (string) => void };\r\n\r\n\r\nexport type ContextType = {|\r\n  isPathExist: boolean,\r\n  isVisualized: boolean,\r\n  isHelped: boolean,\r\n  isCoding: boolean,\r\n\r\n  begin: { current: PositionType },\r\n  end: { current: PositionType },\r\n  board: { current: Array<Array<string>> },\r\n  setItemCache: { current: SetItemCacheType },\r\n  setBoardSizeHook:{ current: Array<void> } , // 补丁\r\n  pathFinder: { current: any },\r\n  delay: { current: number },\r\n  algorithms: {current: Array<string>},\r\n\r\n  clear: void => void,\r\n  clearPath: void => void,\r\n  updateItem: (number, number, string, number) => void,\r\n  updateBoardSize: (number, number) => void,\r\n\r\n  setIsPathExist: boolean => void,\r\n  setIsVisualized: boolean => void,\r\n  setIsHelped: boolean => void,\r\n  setIsCoding: boolean => void,\r\n  addAlgoToHeader: string => void,\r\n|};\r\n\r\nconst Context = createContext<ContextType>();\r\n// const ALGOS = [DIJKSTRA ,BELLMAN_FORD, BFS, DFS, A_STAR];\r\n\r\nconst Provider = ({ children }: Node) => {\r\n  const [isPathExist, setIsPathExist] = useState<boolean>(true);\r\n  const [isVisualized, setIsVisualized] = useState<boolean>(false);\r\n  const [isHelped, setIsHelped] = useState<boolean>(true);\r\n  // 代码编辑器是否打开\r\n  const [isCoding, setIsCoding] = useState<boolean>(false);\r\n  const algorithms = useRef<Array<string>>(ORGINAL_ALGOS);\r\n\r\n  const begin = useRef<PositionType>({ x: Math.round(BOARD_ROW / 2), y: 2 });\r\n  const end = useRef<PositionType>({\r\n    x: Math.round(BOARD_ROW / 2),\r\n    y: BOARD_COL - 3,\r\n  });\r\n  // board 可变，BOARD 不可变\r\n  const board = useRef<Array<Array<string>>>(JSON.parse(JSON.stringify(BOARD)));\r\n  const setItemCache = useRef<SetItemCacheType>({});\r\n  const pathFinder = useRef<Array<void>>(null);\r\n  const delay = useRef<number>(DELAY_FAST);\r\n  const setBoardSizeHook = useRef<any>(null);\r\n  // board 的 开始与结束\r\n  // const [startc, setStartc] = useState(0);\r\n  // const [startr, setStartr] = useState(0);\r\n  // const [endc, setEndc] = useState(BOARD_COL);\r\n  // const [endr, setEndr] = useState(BOARD_ROW);\r\n\r\n  function createArray(length) {\r\n    var arr = new Array(length || 0),\r\n        i = length;\r\n\r\n    if (arguments.length > 1) {\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n        while(i--) arr[length-1 - i] = createArray.apply(this, args);\r\n    } else {\r\n\t\twhile(i-- > 0) arr[i] = ITEM_INITIAL;\r\n    }\r\n\r\n    return arr;\r\n  }\r\n\r\n  const hasAlgo = (name) => {\r\n    return algorithms.current.includes(name.toUpperCase());\r\n  }\r\n  const addAlgoToHeader = (name) => {\r\n    if(!hasAlgo(name)) algorithms.current = algorithms.current.concat(name.toUpperCase());\r\n  }\r\n  const updateBoardSize = (br, bc) => {\r\n    board.current = createArray(br, bc);\r\n    // 拿到 hook\r\n    const setRow = setBoardSizeHook.current[0];\r\n    const setCol = setBoardSizeHook.current[1];\r\n    // 更新 begin 和 end\r\n    begin.current = {x : Math.round(br / 2), y: 2};\r\n    end.current   = {x : Math.round(br / 2), y: bc-3};\r\n    setRow(br);\r\n    setCol(bc);\r\n    clear();\r\n  }\r\n\r\n  const updateItem = (\r\n    ridx,\r\n    cidx,\r\n    type: string = ITEM_FIXED,\r\n    timeFactor: number = 0,\r\n  ) => {\r\n    board.current[ridx][cidx] = type;\r\n    const setItem = setItemCache.current[KEYS[ridx][cidx]];\r\n\r\n    if (timeFactor) {\r\n      const timer = new Timer({\r\n        callback: () => setItem(type, timeFactor),\r\n        delay: timeFactor * delay.current,\r\n      });\r\n      pathFinder.current.timers.push(timer);\r\n    } else {\r\n      setItem(type);\r\n    }\r\n    // console.log(board);\r\n    // console.log(BOARD);\r\n  };\r\n\r\n  const clear = () => {\r\n    if (!isPathExist) setIsPathExist(true);\r\n    if (isVisualized) setIsVisualized(false);\r\n    const currentBoard = board.current;\r\n    currentBoard.forEach((row, ridx) => {\r\n      row.forEach((item, cidx) => {\r\n        updateItem(ridx, cidx, ITEM_INITIAL);\r\n      });\r\n    });\r\n  };\r\n\r\n  const clearPath = () => {\r\n    board.current.forEach((row, ridx) => {\r\n      row.forEach((item, cidx) => {\r\n        if (board.current[ridx][cidx] !== ITEM_CLICKED) {\r\n          updateItem(ridx, cidx, ITEM_INITIAL);\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  // todo ： 添加新算法后会把新算法加入header两次？\r\n  // 一次是主动，一次是关闭 modal 会刷新页面\r\n  // 不过这里做了一个 return 问题不大\r\n  const restoreAlgos = () => {\r\n    var algoNames = getLocalAlgoList();\r\n    // restore\r\n    algoNames.forEach(algo => {\r\n\t\t// todo : 如果覆盖自带的算法可能会有点问题\r\n\t\tif(hasAlgo(algo)) {\r\n\t\t\tconsole.log('already load algo', algo);\r\n\t\t\treturn;\r\n\t\t}\r\n        console.log(algo);\r\n        if(!localItemExist(algo)) {\r\n            console.log('error when loading ', algo);\r\n            // continue;\r\n        } else {\r\n            // 绑定运行时环境\r\n            var code = localStorage.getItem(algo);\r\n            var succ = runCodeWrapper(code);\r\n            if(succ) {\r\n\t\t\t\tconsole.log('resume ', succ);\r\n\t\t\t\taddAlgoToHeader(succ);\r\n            } else {\r\n\t\t\t\tconsole.log('load ', algo, ' error');\r\n\t\t\t}\r\n        }\r\n    });\r\n}\r\n\r\n\trestoreAlgos();\r\n\r\n  return (\r\n    <Context.Provider\r\n      value={{\r\n        // States\r\n        isPathExist,\r\n        isVisualized,\r\n        isHelped,\r\n        isCoding,\r\n\r\n        // Methods\r\n        clear,\r\n        clearPath,\r\n        updateItem,\r\n        setIsPathExist,\r\n        setIsVisualized,\r\n        setIsHelped,\r\n        setIsCoding,\r\n        updateBoardSize,\r\n        addAlgoToHeader,\r\n        // setStartc,\r\n        // setStartr,\r\n        // setEndc,\r\n        // setEndr,\r\n\r\n        // Refs\r\n        pathFinder,\r\n        begin,\r\n        end,\r\n        board,\r\n        setItemCache,\r\n        setBoardSizeHook,\r\n        delay,\r\n        algorithms,\r\n        // startc,\r\n        // startr,\r\n        // endr,\r\n        // endc\r\n      }}\r\n    >\r\n      {children}\r\n    </Context.Provider>\r\n  );\r\n};\r\n\r\nexport { Context, Provider };\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport styled from \"@emotion/styled\";\r\nimport { ORGINAL_ALGOS } from \"constants.js\"\r\n\r\n// import \"./demo-styles.css\";\r\n\r\n// import { options } from \"./options\";\r\n\r\nimport Select from \"react-dropdown-select\";\r\nimport { rmLocalAlgoList } from \"components/Editor/evil\";\r\n\r\nexport default class CustomDrop extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      // disabled: false,\r\n      itemRenderer: true,\r\n      // handle: true,\r\n\r\n      labelField: \"label\",\r\n      valueField: \"value\",\r\n      closeOnSelect: true,\r\n      dropdownHeight: \"300px\"\r\n    };\r\n  }\r\n  // setValues = selectValues => this.setState({ selectValues });\r\n  onChange(val) {\r\n    // console.log(val);\r\n    var algo = val[0]['value'];\r\n    // console.log(algo);\r\n    this.props.onAlgoChange(algo);\r\n  }\r\n\r\n  deleteAlgoByName(name) {\r\n    console.log(name);\r\n    rmLocalAlgoList(name);\r\n  }\r\n\r\n  itemRenderer = ({ item, itemIndex, props, state, methods }) => {\r\n    return (itemIndex + ORGINAL_ALGOS.length<this.props.options.length)?\r\n    (\r\n    <div key={item[props.valueField]} onClick={() => methods.addItem(item)} className={'algo-option'}>\r\n      <div style={{ margin: \"5px\" }}>\r\n        <span style={{float: \"right\"}}>{item[props.labelField]}</span>\r\n        {/* 少些了 箭头函数还行，然后渲染期间所有按钮onclick都执行 。。。*/}\r\n        <button className='content-header__button--drop' onClick={() => this.deleteAlgoByName(item[props.valueField])}>X</button>\r\n      </div>\r\n    </div>\r\n  ):(\r\n    <div key={item[props.valueField]} onClick={() => methods.addItem(item)} className={'algo-option'}>\r\n      <div style={{ margin: \"5px\" }}>\r\n        <span style={{float: \"right\"}}>{item[props.labelField]}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n  render() {\r\n    // console.log(this.props.options);\r\n    return (\r\n      <div className={this.props.className}>\r\n        <div style={{ maxWidth: \"350px\", margin: \"0 auto\" }}>\r\n          <StyledSelect\r\n            disabled={this.props.disabled}\r\n            dropdownHandle={this.state.handle}\r\n            dropdownHeight={this.state.dropdownHeight}\r\n            direction={this.state.direction}\r\n            values={[this.props.options.find(opt => true)]}\r\n            labelField={this.state.labelField}\r\n            valueField={this.state.valueField}\r\n            options={this.props.options}\r\n            onChange={values => this.onChange(values)}\r\n            closeOnSelect={this.state.closeOnSelect}\r\n            dropdownPosition={this.state.dropdownPosition}\r\n            itemRenderer={\r\n              this.state.itemRenderer\r\n                ? (item, itemIndex, props, state, methods) =>\r\n                    this.itemRenderer(item, itemIndex, props, state, methods)\r\n                : undefined\r\n            }\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst StyledSelect = styled(Select)`\r\n  ${({ dropdownRenderer }) =>\r\n    dropdownRenderer &&\r\n    `\r\n\t\t.react-dropdown-select-dropdown {\r\n\t\t\toverflow: initial;\r\n\t\t}\r\n\t`}\r\n`;","// Header 的 算法选择\r\n// 从 Provider 拉取状态\r\n// 允许用户进行定制\r\n\r\nimport React, {useState, useContext} from \"react\";\r\nimport { Context} from '../../Provider.jsx';\r\n\r\nimport CustomDrop from \"./CustomDrop.jsx\";\r\n\r\nconst AlgoSelector = (props) => {\r\n    const context = useContext(Context);\r\n    const {isVisualized, algorithms} = context;\r\n    \r\n    // console.log(props);\r\n    const onAlgoChange = props.onAlgoChange;\r\n    // 倒序... 这样用户的算法就会排在最前面--\r\n    const listItems = algorithms.current;//.map((algo_name) =><option key={algo_name}> {algo_name}</option>);\r\n    var options = [];\r\n    listItems.forEach(element => {\r\n        options.push({'label':element, 'value': element, id: element});\r\n    });\r\n    options.reverse();\r\n    // console.log(options)\r\n\r\n    return (\r\n        // <select\r\n        // className=\"content-header__select\"\r\n        // onChange={onAlgoChange}\r\n        // id=\"algorithm\"\r\n        // disabled={isVisualized}\r\n        // >\r\n        // {listItems}\r\n        // </select>\r\n        // <div >\r\n        // <CustomDropdownHandle \r\n        <CustomDrop\r\n        className=\"content-header__drop\"\r\n         options={options} title={'nb'} \r\n         onAlgoChange={onAlgoChange}\r\n         disabled={isVisualized}/>\r\n        // <ItemRenderer className=\"content-header__select\" options={listItems} title={'nb'}></ItemRenderer>\r\n        // </div>\r\n    );\r\n}\r\n\r\nexport default AlgoSelector;\r\n","import { ITEM_CLICKED } from \"../constants\";\r\nimport { pointEqual } from \"helper\";\r\nimport PathFinder from \"algorithms/pathFinder\";\r\n\r\n\r\nexport default class MgBase {\r\n    // 这声明语法？\r\n    constructor({begin, end, board, updateItem, updateBoardSize}) {\r\n        // this.startr = startr;\r\n        // this.startc = startc;\r\n        // this.endr = endr;\r\n        // this.endc = endc;\r\n        // super(begin, end, updateItem, board);\r\n        this.begin = begin;\r\n        this.end = end;\r\n        this.board = board;\r\n        this.updateItem = updateItem;\r\n        this.updateBoardSize = updateBoardSize;\r\n        this.timers = [];\r\n    }\r\n    updateItem_ = (r,c,type,factor=0.1) => {\r\n        this.updateItem(r,c,type,++this.cnt*factor);\r\n    }\r\n    // setItemClicked(nx, ny, delay=0) {\r\n    //     this.updateItem(nx, ny, ITEM_CLICKED, delay);\r\n    // }\r\n\r\n    // 起始和终点不能放置障碍物\r\n    canSetWall(x, y) {\r\n        const {begin, end } = this;\r\n        // console.log(begin);\r\n        return !pointEqual(x,y,begin) && !pointEqual(x,y,end);\r\n    }\r\n}","import { ITEM_WALL, ITEM_CLICKED } from \"../constants\";\r\nimport MgBase from \"./mgBase\";\r\n\r\nexport default class Stair extends MgBase {\r\n    constructor(args) {\r\n        super(args);\r\n    }\r\n\r\n    excute = () => {\r\n        const {board} = this;\r\n\t\tconsole.log(board);\r\n        this.stairDemo_(board);\r\n    }\r\n    stairDemo_(board) {\r\n\t\tconsole.log(board);\r\n        let currentIdX = board.length - 1;\r\n        let currentIdY = 0;\r\n        \r\n        while (currentIdX > 0 && currentIdY < board[0].length) {\r\n          \tif (this.canSetWall(currentIdX, currentIdY)) {\r\n\t\t\t\tthis.updateItem_(currentIdX, currentIdY, ITEM_CLICKED, 0.2);\r\n          \t}\r\n\t\t\tcurrentIdX--;\r\n\t\t\tcurrentIdY++;\r\n\t\t}\r\n\t\tcurrentIdX++;\r\n        while (currentIdX < board.length - 2 && currentIdY < board[0].length) {\r\n\t\tif (this.canSetWall(currentIdX, currentIdY)) {\r\n\t\t\tthis.updateItem_(currentIdX, currentIdY, ITEM_CLICKED, 0.2);\r\n\t\t}\r\n          currentIdX++;\r\n          currentIdY++;\r\n        }\r\n        while (currentIdX > 0 && currentIdY < board[0].length - 1) {\r\n          \tif (this.canSetWall(currentIdX, currentIdY)) {\r\n      \t\t\tthis.updateItem_(currentIdX, currentIdY, ITEM_CLICKED, 0.2);\r\n          \t}\r\n\t\t\tcurrentIdX--;\r\n\t\t\tcurrentIdY++;\r\n        }\r\n    }    \r\n}","import { ITEM_WALL, ITEM_CLICKED } from \"../constants\";\r\nimport MgBase from \"./mgBase\";\r\n\r\nexport default class Recursion extends MgBase {\r\n    static HOR = 'horizontal';\r\n    static VER = 'vertical';\r\n\r\n    constructor(args) {\r\n        super(args);\r\n        // 稀疏因子，让生成的格子不要太密集\r\n        this.cnt = 0;\r\n        this.sparseFactor_ = 1.8;\r\n        // 方向，子类会覆盖\r\n        // this.orientation_ = Recursion.HOR;\r\n    }\r\n\r\n    excute = () => {\r\n        const {board} = this;\r\n\t\tconsole.log(this.orientation_, Recursion.VER);\r\n        this.recursiveDivisionMaze_(board, 0, board.length, 0, board[0].length,this.orientation_,false, \"wall\");\r\n    }\r\n\r\n    recursiveDivisionMaze_(board, rowStart, rowEnd, colStart, colEnd, orientation, surroundingWalls, type) {\r\n        // console.log('?');\r\n        if (rowEnd < rowStart || colEnd < colStart) {\r\n          return;\r\n        }\r\n        if (!surroundingWalls) {\r\n            for(var r=0; r< board.length; r++) {\r\n                for(var c=0; c<board[0].length; c++) {\r\n                    if(!this.canSetWall(r, c)) continue;\r\n                    if (r === 0 || c === 0 || r === board.length - 1 || c === board[0].length - 1) {\r\n                        if (type === \"wall\") {\r\n                            this.updateItem_(r, c, ITEM_CLICKED);\r\n                        } else if (type === \"weight\") {\r\n                            // this.updateItem_(r,c)\r\n                        }\r\n                      }\r\n                }\r\n            }\r\n          surroundingWalls = true;\r\n        }\r\n        if (orientation === Recursion.HOR) {\r\n          let possibleRows = [];\r\n          for (let number = rowStart; number <= rowEnd; number += 2) {\r\n            possibleRows.push(number);\r\n          }\r\n          let possibleCols = [];\r\n          for (let number = colStart - 1; number <= colEnd + 1; number += 2) {\r\n            possibleCols.push(number);\r\n          }\r\n          let randomRowIndex = Math.floor(Math.random() * possibleRows.length);\r\n        //   let randomColIndex = Math.floor(Math.random() * possibleCols.length);\r\n          let currentRow = possibleRows[randomRowIndex];\r\n          let colRandom = Math.floor(Math.random() * 3);\r\n          \r\n          for(var r = 0; r<board.length; r++) {\r\n              for(var c=0;c<board[0].length;c++) {\r\n                if (r === currentRow && c%3!=colRandom && c >= colStart - 1 && c <= colEnd + 1) {\r\n                    //   let currentHTMLNode = document.getElementById(node);\r\n                    if (this.canSetWall(r, c)) {\r\n                        // board.wallsToAnimate.push(currentHTMLNode);\r\n                        if (type === \"wall\") {\r\n                          this.updateItem_(r,c, ITEM_CLICKED);\r\n                        } else {\r\n                        //   board.nodes[node].status = \"unvisited\";\r\n                        //   board.nodes[node].weight = 15;\r\n                        }        \r\n                    }\r\n                }\r\n              }\r\n          }\r\n\r\n          if (currentRow - 2 - rowStart > colEnd - colStart) {\r\n            this.recursiveDivisionMaze_(board, rowStart, currentRow - 2, colStart, colEnd, orientation, surroundingWalls, type);\r\n          } else {\r\n            this.recursiveDivisionMaze_(board, rowStart, currentRow - 2, colStart, colEnd, Recursion.VER, surroundingWalls, type);\r\n          }\r\n          if (rowEnd - (currentRow + 2) > colEnd - colStart) {\r\n            this.recursiveDivisionMaze_(board, currentRow + 2, rowEnd, colStart, colEnd, orientation, surroundingWalls, type);\r\n          } else {\r\n            this.recursiveDivisionMaze_(board, currentRow + 2, rowEnd, colStart, colEnd, Recursion.VER, surroundingWalls, type);\r\n          }\r\n        } else if(orientation === Recursion.VER){\r\n          let possibleCols = [];\r\n          for (let number = colStart; number <= colEnd; number += 2) {\r\n            possibleCols.push(number);\r\n          }\r\n          let possibleRows = [];\r\n          for (let number = rowStart - 1; number <= rowEnd + 1; number += 2) {\r\n            possibleRows.push(number);\r\n          }\r\n          let randomColIndex = Math.floor(Math.random() * possibleCols.length);\r\n          let randomRowIndex = Math.floor(Math.random() * possibleRows.length);\r\n          let currentCol = possibleCols[randomColIndex];\r\n          let rowRandom = Math.floor(Math.random() * 3);\r\n          \r\n          for(var r = 0; r < board.length; r++) {\r\n              for(var c = 0;c <board[0].length; c++) {\r\n                if (c === currentCol && r%3!=rowRandom && r >= rowStart - 1 && r <= rowEnd + 1) {\r\n                    if (this.canSetWall(r,c)) {\r\n                        if (type === \"wall\") {\r\n                            this.updateItem_(r, c, ITEM_CLICKED);\r\n                        } else {\r\n                        \r\n                        }        \r\n                    }\r\n                }\r\n              }\r\n          }\r\n\r\n          if (rowEnd - rowStart > currentCol - 2 - colStart) {\r\n            var wall = (rowEnd-rowStart> board.length/this.sparseFactor_)? 'wall':'';\r\n            this.recursiveDivisionMaze_(board, rowStart, rowEnd, colStart, currentCol - 2, Recursion.HOR, surroundingWalls, wall);\r\n          } else {\r\n            this.recursiveDivisionMaze_(board, rowStart, rowEnd, colStart, currentCol - 2, orientation, surroundingWalls, type);\r\n          }\r\n          if (rowEnd - rowStart > colEnd - (currentCol + 2)) {\r\n              var wall = (rowEnd-rowStart> board.length/this.sparseFactor_)? 'wall':'';\r\n            this.recursiveDivisionMaze_(board, rowStart, rowEnd, currentCol + 2, colEnd, Recursion.HOR, surroundingWalls, wall);\r\n          } else {\r\n            this.recursiveDivisionMaze_(board, rowStart, rowEnd, currentCol + 2, colEnd, orientation, surroundingWalls, type);\r\n          }\r\n        }\r\n      };\r\n}\r\n  ","import { ITEM_WALL, ITEM_CLICKED } from \"../constants\";\r\nimport Recursion from \"./RecursiveDivision\";\r\n\r\nexport default class HorizontalRecursion extends Recursion {\r\n    constructor(args) {\r\n        super(args);\r\n        // 方向\r\n        this.orientation_ = Recursion.HOR;\r\n    }\r\n}\r\n","import { ITEM_WALL, ITEM_CLICKED } from \"../constants\";\r\nimport MgBase from \"./mgBase\";\r\nimport Recursion from \"./RecursiveDivision\";\r\n\r\nexport default class VerticalRecursion extends Recursion {\r\n    constructor(args) {\r\n        super(args);\r\n        // 方向\r\n        this.orientation_ = Recursion.VER;\r\n    }\r\n}\r\n","import React, {useState, useContext} from \"react\";\r\nimport { Context} from '../../Provider.jsx';\r\nimport MgRandom from \"mapGeneration/MgRandom\";\r\nimport Stair from \"mapGeneration/StairDemo\";\r\nimport Recursion from \"mapGeneration/RecursiveDivision\";\r\nimport HorizontalRecursion from \"mapGeneration/HorizontalRecursion.js\";\r\nimport VerticalRecursion from \"mapGeneration/VerticalRecursion.js\";\r\n\r\nconst RANDOM = 'random';\r\nconst STAIR = 'stair';\r\nconst HOR_RER = 'horizontal';\r\nconst VER_RER = 'vertical';\r\n\r\nconst MapSelector = () => {\r\n    const context = useContext(Context);\r\n    const {isVisualized, updateItem, clear, board, begin, end, updateBoardSize, pathFinder} = context;\r\n    \r\n    const mapAlgos = [ \r\n        // RANDOM, \r\n        STAIR, HOR_RER, VER_RER];\r\n    const MapGenerationMap = {\r\n        // [RANDOM]: MgRandom,\r\n        [STAIR]: Stair,\r\n        [HOR_RER]: HorizontalRecursion,\r\n        [VER_RER]: VerticalRecursion,\r\n    };\r\n\r\n    // 地图生成算法\r\n    // const [type, setType] = useState<string>(RANDOM);\r\n    const onMapAlgoChange = (e: ElementEvent<HTMLSelectElement>) => {\r\n        // setType(e.target.value);\r\n        console.log('清除地图并生成新地图');\r\n        clear();\r\n        // 调用函数\r\n        var algoName = e.target.value;\r\n        // console.log(algoName);\r\n        // console.log(startr, startc, endr, endc);\r\n        var mgalgo = new MapGenerationMap[algoName]({\r\n            begin: begin.current,\r\n            end: end.current,\r\n            updateItem,\r\n            board: board.current, \r\n            updateBoardSize: updateBoardSize}\r\n        );\r\n        pathFinder.current = mgalgo;\r\n        mgalgo.excute(updateItem);\r\n    }\r\n    \r\n    const listItems = mapAlgos.map((algo_name) =><option key={algo_name}> {algo_name}</option>);\r\n\r\n    return (\r\n        <select\r\n        className=\"content-header__select\"\r\n        onChange={onMapAlgoChange}\r\n        id=\"mapAlgorithm\"\r\n        disabled={isVisualized}\r\n        >\r\n        {listItems}\r\n        </select>\r\n    );\r\n}\r\n\r\nexport default MapSelector;\r\n","import React from 'react';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst SizeSlider = (props) => {\r\n    // console.log(props);\r\n    const updateBoardSize = props.updateBoardSize;\r\n    const board = props.board;\r\n\r\n    const handleRowChange = (event, newValue) => {\r\n        // console.log('row ', newValue);\r\n        updateBoardSize(newValue, board.current[0].length);\r\n    };\r\n\r\n    const handleColChange = (event, newValue) => {\r\n        // console.log('col ', newValue);\r\n        console.log(board.current[0].length);\r\n        updateBoardSize(board.current.length, newValue);\r\n    };\r\n\r\n    return (\r\n        <div className=\"content-header__slider\"\r\n            // disabled={isVisualized}\r\n            id = \"size-slider\">\r\n            <Typography id=\"discrete-slider-restrict\" \r\n                        className=\"header-font\"\r\n                        gutterBottom>\r\n                Row / Col Size\r\n            </Typography>\r\n            <SingleSilder\r\n                id = 'row-slider'\r\n                defVal = {16}\r\n                step = {1}\r\n                min = {10}\r\n                max = {16}\r\n                handleChange = {handleRowChange}\r\n                disabled={props.disabled}\r\n                />\r\n            <SingleSilder\r\n                id = 'col-slider'\r\n                defVal = {30}\r\n                step = {1}\r\n                min = {18}\r\n                max = {30}\r\n                handleChange = {handleColChange}\r\n                disabled={props.disabled}\r\n                />\r\n            {/* <Typography id=\"discrete-slider-restrict\" gutterBottom>\r\n                Col Size\r\n            </Typography> */}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport const SingleSilder = (props) => {\r\n    return (\r\n        <Slider\r\n            defaultValue={props.defVal}\r\n            aria-labelledby=\"discrete-slider-small-steps\"\r\n            step={props.step}\r\n            marks\r\n            min={props.min}\r\n            max={props.max}\r\n            valueLabelDisplay=\"auto\"\r\n            onChange={props.handleChange}\r\n            disabled={props.disabled}\r\n            />\r\n    );\r\n}\r\n\r\nexport default SizeSlider;","import { SingleSilder } from \"./SizeSlider\";\r\nimport React from 'react';\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst { DELAY_FAST } = require(\"constants\");\r\n\r\n\r\nconst SpeedSlider = (props) => {\r\n    const MAX_VAL = 300;\r\n    const handleChange = (event, newValue) => {\r\n        console.log(newValue);\r\n        props.onDelayChange(event, newValue);\r\n    };\r\n\r\n    return (\r\n        <div className=\"content-header__delay\"\r\n            // onChange={props.onDelayChange}\r\n            // defaultValue={DELAY_FAST}\r\n            // disabled={props.disabled}\r\n            id = \"speed-slider\">\r\n            <SingleSilder\r\n                id = 'row-slider'\r\n                defVal = {100}\r\n                step = {50}\r\n                min = {50}\r\n                max = {MAX_VAL}\r\n                handleChange = {handleChange}\r\n                disabled={props.disabled}\r\n                \r\n                />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default SpeedSlider;","// @flow\r\n\r\nimport React, { useState, useContext } from 'react';\r\nimport {\r\n  DIJKSTRA,\r\n  BELLMAN_FORD,\r\n  A_STAR,\r\n  DFS,\r\n  BFS,\r\n  DELAY_SLOWEST,\r\n  DELAY_SLOW,\r\n  DELAY_NORMAL,\r\n  DELAY_FAST,\r\n  DELAY_FASTEST,\r\n} from 'constants.js';\r\nimport { Context, type ContextType } from 'Provider';\r\nimport pathfinderMap, {PathfinderMapType} from 'algorithms/index';\r\nimport { FaPause, FaPlay } from 'react-icons/fa';\r\nimport './Header.scss';\r\nimport AlgoSelector from './AlgoSelector';\r\nimport MapSelector from './MapSelector';\r\nimport SizeSlider from './SizeSlider';\r\nimport SpeedSlider from './SpeedSlider'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\nconst Header = () => {\r\n  const [type, setType] = useState<string>(DIJKSTRA);\r\n  const [pause, setPause] = useState<boolean>(false);\r\n  const context = useContext<ContextType>(Context);\r\n  // 用于更新 header 的可选算法\r\n  // algorithm name -> class\r\n  const [pfMap, setPfMap] = useState<PathfinderMapType>(pathfinderMap);\r\n  const {\r\n    algorithms,\r\n    begin,\r\n    end,\r\n    updateItem,\r\n    delay,\r\n    pathFinder,\r\n    clear,\r\n    clearPath,\r\n    board,\r\n    isVisualized,\r\n    setIsPathExist,\r\n    setIsVisualized,\r\n    setIsHelped,\r\n    setIsCoding,\r\n    updateBoardSize,\r\n  } = context;\r\n  \r\n  // const onAlgoChange = (e: ElementEvent<HTMLSelectElement>) => {\r\n  //   setType(e.target.value);\r\n  // };\r\n  const onAlgoChange = (nv) => {\r\n    setType(nv);\r\n  };\r\n\r\n  // const onDelayChange = (e: ElementEvent<HTMLSelectElement>) => {\r\n  //   delay.current = Number(e.target.value);\r\n  // };\r\n  const onDelaySliderChange = (e, nv) => {\r\n    delay.current = nv;\r\n  };\r\n\r\n  const onVisualize = () => {\r\n    if (isVisualized) return;\r\n    clearPath();\r\n    setIsVisualized(true);\r\n\r\n    console.log(type);\r\n    console.log(pathfinderMap);\r\n    pathFinder.current = new pathfinderMap[type]({\r\n      begin: begin.current,\r\n      end: end.current,\r\n      updateItem,\r\n      board: board.current,\r\n    });\r\n    console.log(pathFinder.current);\r\n    const isPossiblePath = pathFinder.current.execute();\r\n    setIsPathExist(isPossiblePath);\r\n  };\r\n\r\n  const onClearAll = () => {\r\n    if (isVisualized && !pause) return;\r\n    if (pause) setPause(false);\r\n    setIsVisualized(false);\r\n\r\n    clear();\r\n  };\r\n\r\n  const onClearPath = () => {\r\n    if (isVisualized && !pause) return;\r\n    if (pause) setPause(false);\r\n    setIsVisualized(false);\r\n\r\n    clearPath();\r\n  };\r\n\r\n  const onPause = () => {\r\n    if (pause) {\r\n      setPause(false);\r\n      pathFinder.current.resumeTimers();\r\n    } else {\r\n      setPause(true);\r\n      pathFinder.current.stopTimers();\r\n    }\r\n  };\r\n\r\n  const onHelp = () => {\r\n    setIsHelped(true);\r\n  };\r\n\r\n  const onCoding = () => {\r\n    setIsCoding(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"content-header\">\r\n      {/* <select\r\n        className=\"content-header__select\"\r\n        onChange={onAlgoChange}\r\n        id=\"algorithm\"\r\n        disabled={isVisualized}\r\n      >\r\n        <option value={DIJKSTRA} defaultChecked>\r\n          Dijkstra\r\n        </option>\r\n      </select> */}\r\n      {/* <div> */}\r\n      <SizeSlider \r\n      test = {\"sch\"} \r\n      updateBoardSize = {updateBoardSize}\r\n      board = {board}\r\n      disabled = {isVisualized}\r\n      />\r\n      <MapSelector />\r\n      <AlgoSelector  onAlgoChange={onAlgoChange}/>\r\n      {/* <select\r\n        className=\"content-header__select\"\r\n        onChange={onDelayChange}\r\n        defaultValue={DELAY_FAST}\r\n        disabled={isVisualized}\r\n      >\r\n        <option value={DELAY_SLOW}>slowest</option>\r\n        <option value={DELAY_SLOWEST}>slow</option>\r\n        <option value={DELAY_NORMAL}>normal</option>\r\n        <option value={DELAY_FAST}>fast</option>\r\n        <option value={DELAY_FASTEST}>fastest</option>\r\n      </select> */}\r\n      <Typography id=\"discrete-slider-restrict\" className=\"header-font\" gutterBottom>\r\n        Delay\r\n      </Typography>\r\n      <SpeedSlider onDelayChange = {onDelaySliderChange}\r\n                   disabled = {isVisualized}\r\n      />\r\n\r\n      <button\r\n        className=\"content-header__button\"\r\n        onClick={onVisualize}\r\n        disabled={isVisualized}\r\n        type=\"button\"\r\n      >\r\n        GO!\r\n      </button>\r\n      <button\r\n        className=\"content-header__button\"\r\n        onClick={onClearAll}\r\n        disabled={isVisualized && !pause}\r\n        type=\"button\"\r\n      >\r\n        Clear Board\r\n      </button>\r\n      <button\r\n        className=\"content-header__button\"\r\n        onClick={onClearPath}\r\n        disabled={isVisualized && !pause}\r\n        type=\"button\"\r\n      >\r\n        Clear Path\r\n      </button>\r\n      <button\r\n        className=\"content-header__button--pause\"\r\n        onClick={onPause}\r\n        disabled={!isVisualized}\r\n        type=\"button\"\r\n      >\r\n        {pause ? <FaPlay /> : <FaPause />}\r\n      </button>\r\n      <button\r\n        className=\"content-header__button--usage\"\r\n        onClick={onHelp}\r\n        disabled={isVisualized && !pause}\r\n        type=\"button\"\r\n      >\r\n        How to play?\r\n      </button>\r\n      <button\r\n        className=\"content-header__button--usage\"\r\n        onClick={onCoding}\r\n        disabled={isVisualized && !pause}\r\n        type=\"button\"\r\n      >\r\n        Code Editor\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","// @flow\r\n\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport { Context } from 'Provider';\r\n// import {CSSTransition} from 'react-transition-group'; // ES6\r\nimport {\r\n  INITIAL_COLOR,\r\n  VISITED_COLOR,\r\n  KEYS,\r\n  FIXED_COLOR,\r\n  ITEM_INITIAL,\r\n  ITEM_VISITED,\r\n  ITEM_CLICKED,\r\n  CLICKED_COLOR,\r\n  ITEM_SHORTEST,\r\n  SHORTEST_COLOR,\r\n  ITEM_WALL,\r\n  WALL_COLOR,\r\n  BOARD_HEIGHT,\r\n  ITEM_FIXED,\r\n} from 'constants.js';\r\nimport './Item.scss';\r\nimport { pointEqual } from 'helper';\r\nimport Background from '../../styles/circle.svg'\r\n\r\n\r\n\r\nconst Item = ({ ridx, cidx }: { ridx: number, cidx: number }) => {\r\n  const [type, setType] = useState(ITEM_INITIAL);\r\n  const [num, setNum] = useState('');\r\n  const { setItemCache, begin, end, pathFinder, setIsVisualized, board } = useContext(\r\n    Context,\r\n  );\r\n\r\n  const setTypeWrapper = (type, i) => {\r\n    setType(type);\r\n    // if(type === ITEM_SHORTEST) console.log(i);\r\n    if(type === ITEM_SHORTEST) {\r\n      setNum(i);\r\n    } else {\r\n      setNum('');\r\n    }\r\n  }\r\n\r\n  // setItemCache.current[KEYS[ridx][cidx]] = setType;\r\n  setItemCache.current[KEYS[ridx][cidx]] = setTypeWrapper;\r\n\r\n  useEffect(() => {\r\n    if (\r\n      type === ITEM_VISITED &&\r\n      ridx === end.current.x &&\r\n      cidx === end.current.y\r\n    ) {\r\n      pathFinder.current.paintShortestPath();\r\n    }\r\n  }, [type, end, pathFinder, ridx, cidx]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      type === ITEM_SHORTEST &&\r\n      ridx === end.current.x &&\r\n      cidx === end.current.y\r\n    ) {\r\n      pathFinder.current.clearTimers();\r\n      setIsVisualized(false);\r\n    }\r\n  }, [type, end, pathFinder, ridx, cidx, setIsVisualized]); // 仅在这些值更改时进行更新\r\n\r\n  const getColor = () => {\r\n    if (ridx === begin.current.x && cidx === begin.current.y)return FIXED_COLOR;\r\n    else if(ridx === end.current.x && cidx === end.current.y)\r\n    {\r\n      return 'white';\r\n    }\r\n    // todo: 把常量换成数字，做个数组\r\n    if (type === ITEM_VISITED) {\r\n      return VISITED_COLOR;\r\n    }\r\n    if (type === ITEM_CLICKED) {\r\n      return CLICKED_COLOR;\r\n    }\r\n    if (type === ITEM_SHORTEST) {\r\n      return SHORTEST_COLOR;\r\n    }\r\n    if(type === ITEM_WALL) {\r\n      return WALL_COLOR;\r\n    }\r\n    return INITIAL_COLOR;\r\n  };\r\n\r\n\r\n  const animationMap = {\r\n    [ITEM_INITIAL]: 'none',\r\n    [ITEM_VISITED]: 'visitedAnimation',\r\n    [ITEM_CLICKED]: 'wallAnimation',\r\n    [ITEM_SHORTEST]: 'shortestAnimation'\r\n  }\r\n  const getFrame = () => {\r\n    if(pointEqual(ridx, cidx, begin.current) || pointEqual(ridx, cidx, end.current)) {\r\n      return 'none';\r\n    }\r\n    return animationMap[type];\r\n  }\r\n\r\n  const getItemSize = () => {\r\n\t  return JSON.stringify(BOARD_HEIGHT / board.current.length) + \"vh\";\r\n  }\r\n\r\n  const getFontSize = () => {\r\n    // 跟随棋盘高度摇摆~\r\n    return String(20*16/board.current.length)+\"px\";\r\n  }\r\n//   console.log(getItemSize());\r\n  const getBgImage = () => {\r\n    var link = `url(${Background})`;\r\n    return (ridx === end.current.x && cidx === end.current.y)? link : 'none'\r\n  }\r\n\r\n  return (\r\n    // <CSSTransition in=\"true\" timeout={200} classNames=\"example\">\r\n    <div\r\n      className=\"board__item\"\r\n      data-type={type}\r\n      data-ridx={ridx}\r\n      data-cidx={cidx}\r\n      style={{\r\n        fontSize: getFontSize(),\r\n\t\tbackgroundColor: getColor(),\r\n\t\theight: getItemSize(),\r\n    width: getItemSize(),\r\n    animationName: getFrame(),\r\n    backgroundImage: getBgImage(),\r\n        // boxShadow: \r\n      }}\r\n    >\r\n      <div className=\"shortest-num\">{num}</div>\r\n    </div>\r\n    // </CSSTransition>\r\n  );\r\n};\r\n\r\nexport default Item;\r\n","// @flow\r\n\r\nimport React, { useContext, useState, useRef } from 'react';\r\nimport { Context, type ContextType } from 'Provider';\r\nimport { KEYS, BOARD, ITEM_CLICKED, ITEM_INITIAL, ITEM_WALL, BOARD_COL, BOARD_ROW } from 'constants.js';\r\nimport './Board.scss';\r\nimport Item from '../Item/Item';\r\n\r\nconst Board = () => {\r\n  const context = useContext<ContextType>(Context);\r\n  const { updateItem, begin, end, isVisualized, board, setBoardSizeHook } = context;\r\n\r\n  const [boardRow, setBoardRow] = useState(BOARD_ROW);\r\n  const [boardCol, setBoardCol] = useState(BOARD_COL);\r\n\r\n  // Hook\r\n  setBoardSizeHook.current = [setBoardRow, setBoardCol];\r\n\r\n  const [clicking, setClicking] = useState<boolean>(false);\r\n  const [dragging, setDragging] = useState<{| begin: boolean, end: boolean |}>({\r\n    begin: false,\r\n    end: false,\r\n  });\r\n  const clickPos = useRef<{|x: number, y: number|}>({ x: -1, y: -1 });\r\n\r\n  const onMouseDown = (e: ElementEvent<HTMLDivElement>) => {\r\n    const ridx = Number(e.target.dataset.ridx);\r\n    const cidx = Number(e.target.dataset.cidx);\r\n\r\n    if (ridx === begin.current.x && cidx === begin.current.y) {\r\n      setDragging({ begin: true, end: false });\r\n    } else if (ridx === end.current.x && cidx === end.current.y) {\r\n      setDragging({ begin: false, end: true });\r\n    } else {\r\n      clickPos.current = { x: ridx, y: cidx };\r\n      setClicking(true);\r\n    }\r\n  };\r\n  const onMouseUp = () => {\r\n    setClicking(false);\r\n    setDragging({ begin: false, end: false });\r\n  };\r\n\r\n  const changeColor = (e: ElementEvent<HTMLDivElement>, mouseMove: boolean) => {\r\n    if (e.target.className !== 'board__item') return;\r\n    const { type } = e.target.dataset;\r\n    if (type !== ITEM_INITIAL && type !== ITEM_CLICKED) return;\r\n\r\n    const ridx = Number(e.target.dataset.ridx);\r\n    const cidx = Number(e.target.dataset.cidx);\r\n\r\n    const itemType =\r\n      type === ITEM_CLICKED && !mouseMove ? ITEM_INITIAL : ITEM_CLICKED;\r\n    updateItem(ridx, cidx, itemType);\r\n  };\r\n\r\n  const onClick = (e: ElementEvent<HTMLDivElement>) => {\r\n    if (isVisualized) return;\r\n    // 这个 e 是和最开始点击的 e 绑定的，如果没有移到原位\r\n    // 那么 e.*** 是 undefined ，这和手机点击移开取消是一回事！\r\n    changeColor(e, false);\r\n  };\r\n\r\n  const onMouseMove = (e: ElementEvent<HTMLDivElement>) => {\r\n    // console.log('onmove');\r\n    if (isVisualized) return;\r\n    if (e.target.className !== 'board__item') return;\r\n    const { type } = e.target.dataset;\r\n    if(type == ITEM_WALL) return;\r\n\r\n    const ridx = Number(e.target.dataset.ridx);\r\n    const cidx = Number(e.target.dataset.cidx);\r\n\r\n    if (dragging.begin || dragging.end) {\r\n      const formerX = dragging.begin ? begin.current.x : end.current.x;\r\n      const formerY = dragging.begin ? begin.current.y : end.current.y;\r\n\r\n      updateItem(formerX, formerY, ITEM_INITIAL);\r\n\r\n      const next = { x: ridx, y: cidx };\r\n\r\n      if (dragging.begin) {\r\n        begin.current = next;\r\n      } else {\r\n        end.current = next;\r\n      }\r\n\r\n      updateItem(next.x, next.y);\r\n    } else {\r\n      if (!clicking) return;\r\n      // 取消注释会导致 drag 方式第一个 item 不会着 clicked\r\n      if (clickPos.current.x === ridx && clickPos.current.y === cidx) return;\r\n      changeColor(e, true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"board\"\r\n      onMouseDown={onMouseDown}\r\n      onMouseUp={onMouseUp}\r\n      onMouseMove={onMouseMove}\r\n      onClick={onClick}\r\n      role=\"button\"\r\n      tabIndex=\"0\"\r\n    >\r\n      {board.current.map((row, ridx) => (\r\n        // eslint-disable-next-line react/no-array-index-key\r\n        <div className=\"board__row\" key={ridx}>\r\n          {row.map((col, cidx) => (\r\n            <Item ridx={ridx} cidx={cidx} key={KEYS[ridx][cidx]} />\r\n          ))}\r\n          <br />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Board;\r\n","// @flow\r\n\r\nimport React from 'react';\r\nimport Modal from 'react-modal';\r\nimport './ModalInfo.scss';\r\n\r\ntype ModalInfoPropTypes = {\r\n  isHelped: boolean,\r\n  onHelpClose: any => void,\r\n};\r\n\r\nconst ModalInfo = ({ isHelped, onHelpClose }: ModalInfoPropTypes) => {\r\n  return (\r\n    <Modal\r\n      className=\"modal-info\"\r\n      isOpen={isHelped}\r\n      contentLabel=\"Example Modal\"\r\n      onRequestClose={onHelpClose}\r\n    >\r\n      <h1 className=\"modal-info__title\">How to use?</h1>\r\n      <p className=\"modal-info__color\">\r\n        <div className=\"modal-info__row\">\r\n          <p className=\"modal-info__content\">\r\n            <span className=\"modal-info__square--initial\" />\r\n            <p>initial</p>\r\n          </p>\r\n          <p className=\"modal-info__content\">\r\n            <span className=\"modal-info__square--visited\" />\r\n            <p>visited</p>\r\n          </p>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <p className=\"modal-info__content\">\r\n            <span className=\"modal-info__square--clicked\" />\r\n            <p>wall</p>\r\n          </p>\r\n          <p className=\"modal-info__content\">\r\n            <span className=\"modal-info__square--fixed\" />\r\n            <p>begin end</p>\r\n          </p>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <p className=\"modal-info__content\">\r\n            <span className=\"modal-info__square--shortest\" />\r\n            <p>path</p>\r\n          </p>\r\n        </div>\r\n      </p>\r\n      <p className=\"modal-info__usage\">\r\n        <div className=\"modal-info__row\">\r\n          <h2>1. You can make wall by clicking any block</h2>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <h2>2. You can move</h2>\r\n          <span className=\"modal-info__square--fixed\" />\r\n          <h2>by dragging</h2>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <h2>3. You can choose path-finding or map-generation algorithms</h2>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <h2>4. You can change Borad size or delay</h2>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <h2>5. You can use your own algorithm !!! by code editor</h2>\r\n        </div>\r\n        <div className=\"modal-info__row\">\r\n          <h2>Explore more by yourself ~~~///(^v^)\\\\\\~~~</h2>\r\n        </div>\r\n      </p>\r\n      <button onClick={onHelpClose} className=\"modal-info__close\" type=\"button\">\r\n        X\r\n      </button>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default ModalInfo;\r\n","// @flow\n\nimport React from 'react';\nimport Modal from 'react-modal';\nimport './ModalError.scss';\n\ntype ModalErrorPropTypes = {\n  isErrorOpen: boolean,\n  onErrorClose: any => void,\n};\n\nconst ModalError = ({ isErrorOpen, onErrorClose }: ModalErrorPropTypes) => {\n  return (\n    <Modal\n      className=\"modal-error\"\n      isOpen={isErrorOpen}\n      contentLabel=\"Example Modal\"\n      onRequestClose={onErrorClose}\n    >\n      <h1 className=\"modal-error__title\">Error!</h1>\n      <p className=\"modal-error__content\">Cannot find path to the goal</p>\n      <button\n        onClick={onErrorClose}\n        className=\"modal-error__close\"\n        type=\"button\"\n      >\n        X\n      </button>\n    </Modal>\n  );\n};\n\nexport default ModalError;\n","import React, {useState} from \"react\";\r\nimport AceEditor from \"react-ace\";\r\n\r\nimport \"ace-builds/src-noconflict/mode-javascript\";\r\nimport \"ace-builds/src-noconflict/theme-tomorrow\";\r\nimport \"ace-builds/src-noconflict/ext-language_tools\";\r\nimport {addAlgo, getInitCode, saveInitCode, addLocalAlgoList, localItemExist, ALGO_LIST} from \"./evil\";\r\nimport { useContext } from \"react\";\r\nimport { Context } from \"Provider\";\r\nimport { getLocalAlgoList } from \"helper\";\r\n\r\n\r\nconst AceWrapper = () => {\r\n  const context = useContext(Context);\r\n  const {setIsCoding, algorithms, addAlgoToHeader} = context;\r\n\r\n  function resetCode() {\r\n    saveInitCode(init_code);\r\n    setState({\r\n      codeText: init_code,\r\n    });\r\n  }\r\n\r\n  function dropAll() {\r\n    localStorage.setItem(ALGO_LIST, \"[]\");\r\n  }\r\n\r\n  async function onSubmit() {\r\n    const { codeText } = state;\r\n    console.log(codeText);\r\n    var succ = addAlgo(undefined, codeText);\r\n    if(succ) {\r\n      // console.log(succ);\r\n      // if(!algorithms.current.includes(succ)) algorithms.current = algorithms.current.concat(succ);\r\n      addAlgoToHeader(succ);\r\n      addLocalAlgoList(succ, codeText); // 后续可以恢复\r\n      // console.log(algorithms);\r\n      alert('代码成功上传啦');\r\n      setIsCoding(false);\r\n    } else {\r\n      // alert(error);\r\n    }\r\n  }\r\n\r\n  const onChange = (newValue) => {\r\n    // console.log(\"change\", newValue);\r\n    // 那是真的牛逼\r\n    setState({\r\n      codeText: newValue,\r\n    });\r\n  }\r\n\r\n  const [state, setState] = useState({\r\n    codeText: getEditedCode(),\r\n  });\r\n  \r\n  // functional editor component\r\n  return (\r\n    <div>\r\n      <AceEditor\r\n        mode=\"javascript\"\r\n        theme=\"tomorrow\"\r\n        onChange={onChange}\r\n        name=\"UNIQUE_ID_OF_DIV\"\r\n        editorProps={{ $blockScrolling: true }}\r\n        setOptions={{\r\n          enableBasicAutocompletion: true,\r\n          enableLiveAutocompletion: true,\r\n          enableSnippets: true\r\n        }}\r\n        width=\"1100px\"\r\n        height=\"500px\"\r\n        fontSize=\"18px\"\r\n         // 这个不加字符串都被codeText吃了，啥都没了\r\n        value={state.codeText}\r\n      />\r\n      <button onClick={()=> {onSubmit()}}>\r\n          Submit</button>\r\n          {/* 重置代码 */}\r\n      <button onClick={()=>{resetCode()}}>\r\n          Reset</button>\r\n      <button onClick={()=>{dropAll()}}>\r\n          Drop All</button>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nfunction getEditedCode() {\r\n  var code = getInitCode();\r\n  return (code===null)?init_code:code;\r\n}\r\n\r\nconst init_code = \r\n\"// 使用须知以下常量定义：\\n\\\r\n// BOARD_ROW|   BOARD_COL|      ITEM_CLICKED|          ITEM_VISITED\\n\\\r\n// 行数         列数            该格子已经被占用        该格子已经被访问过\\n\\\r\n\\n\\\r\nclass MyAlgoName extends PathFinder {\\n\\\r\n  constructor(args) {\\n\\\r\n    super(args);\\n\\\r\n    this.find = false;\\n\\\r\n  }\\n\\\r\n\\n\\\r\n// 类成员和方法须知（使用 this.* 进行调用）：\\n\\\r\n// 在访问一个节点后，请执行以下调用\\n\\\r\n// updateItem(nextX, nextY, ITEM_VISITED, 1);（可视化点状态）\\n\\\r\n// prev[x][y] 表示(x,y)的祖先节点，请使用以下代码进行链接（可视化路径）\\n\\\r\n// prev[x][y] = { x: i, y: j };\\n\\\r\n// begin / end：起点 / 终点\\n\\\r\n// board[x][y]：(x,y) 的状态\\n\\\r\n\\n\\\r\n  execute = () => {\\n\\\r\n    // const { prev, end, board, updateItem } = this;\\n\\\r\n    // 这里写入你算法的主要逻辑\\n\\\r\n    \\n\\\r\n    // END \\n\\\r\n    if (!this.find) this.clearTimers();\\n\\\r\n    return this.find;\\n\\\r\n  };\\n\\\r\n}\\n\\\r\n\"\r\n\r\nexport default AceWrapper;","// @flow\r\n\r\nimport React from 'react';\r\nimport Modal from 'react-modal';\r\nimport './Editor.scss';\r\nimport AceWrapper from './AceWrapper';\r\n\r\n\r\ntype EditorPropTypes = {\r\n  isCoding: boolean,\r\n  onEditorClose: any => void,\r\n};\r\n\r\nconst CodeEditor = ({ isCoding, onEditorClose }: EditorPropTypes) => {\r\n  \r\n  return (\r\n    <Modal\r\n      className=\"modal-editor\"\r\n      isOpen={isCoding}\r\n      contentLabel=\"Example Modal\"\r\n      onRequestClose={onEditorClose}\r\n    >\r\n    <h1 className=\"modal-info__title\">Code Editor</h1>\r\n      \r\n      <div >\r\n        <AceWrapper />\r\n        {/* <button onClick={()=> {this.refs.editor.editor.undo()}}>\r\n          Undo</button>\r\n        <button onClick={()=> {this.refs.editor.editor.redo()}}>\r\n          Redo</button> */}\r\n      </div>\r\n\r\n      <button onClick={onEditorClose } className=\"modal-info__close\" type=\"button\">\r\n        X\r\n      </button>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default CodeEditor;\r\n","import React from 'react';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { purple } from '@material-ui/core/colors';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport PathFinder from 'algorithms/pathFinder'\r\n\r\n//   const Switcher = (props) => {\r\n//     return (\r\n//         <FormControlLabel\r\n//           control={<Switch size=\"small\" checked={false} onChange={props.onChange} />}\r\n//           label=\"Small\"\r\n//         />\r\n//     );\r\n// }\r\n\r\n// export default Switcher;\r\n\r\nconst Switcher_ = withStyles((theme) => ({\r\n\troot: {\r\n\t  width: 42,\r\n\t  height: 26,\r\n\t  padding: 0,\r\n\t  margin: theme.spacing(1),\r\n\t},\r\n\tswitchBase: {\r\n\t  padding: 1,\r\n\t  '&$checked': {\r\n\t\ttransform: 'translateX(16px)',\r\n\t\tcolor: theme.palette.common.white,\r\n\t\t'& + $track': {\r\n\t\t  backgroundColor: '#52d869',\r\n\t\t  opacity: 1,\r\n\t\t  border: 'none',\r\n\t\t},\r\n\t  },\r\n\t  '&$focusVisible $thumb': {\r\n\t\tcolor: '#52d869',\r\n\t\tborder: '6px solid #fff',\r\n\t  },\r\n\t},\r\n\tthumb: {\r\n\t  width: 24,\r\n\t  height: 24,\r\n\t},\r\n\ttrack: {\r\n\t  borderRadius: 26 / 2,\r\n\t  border: `1px solid ${theme.palette.grey[400]}`,\r\n\t  backgroundColor: theme.palette.grey[50],\r\n\t  opacity: 1,\r\n\t  transition: theme.transitions.create(['background-color', 'border']),\r\n\t},\r\n\tchecked: {},\r\n\tfocusVisible: {},\r\n  }))(({ classes, ...props }) => {\r\n\treturn (\r\n\t  <Switch\r\n\t\tfocusVisibleClassName={classes.focusVisible}\r\n\t\tdisableRipple\r\n\t\tclasses={{\r\n\t\t  root: classes.root,\r\n\t\t  switchBase: classes.switchBase,\r\n\t\t  thumb: classes.thumb,\r\n\t\t  track: classes.track,\r\n\t\t  checked: classes.checked,\r\n\t\t}}\r\n\t\t{...props}\r\n\t  />\r\n\t);\r\n});\r\n\r\nexport default function Switcher() {\r\n\tconst [state, setState] = React.useState({\r\n\t  checked: false,\r\n\t});\r\n  \r\n\tconst handleChange = (event) => {\r\n\t\tvar checked = event.target.checked;\r\n\t\tsetState({ ...state, [event.target.name]: checked });\r\n\t\tconsole.log(checked);\r\n\t\tPathFinder.enableDiagonal(checked);\r\n\t};\r\n  \r\n\treturn (\r\n\t\t<FormControlLabel className=\"switcher\"\r\n\t\t  control={<Switcher_ checked={state.checked} onChange={handleChange} name=\"checked\" />}\r\n\t\t  label=\"Enable Diagonal\"\r\n\t\t  labelPlacement=\"right\"\r\n\t\t/>\r\n\t);\r\n  }\r\n  ","// @flow\r\n\r\nimport React, { useEffect, useContext, useState } from 'react';\r\nimport Modal from 'react-modal';\r\nimport { FaGithub } from 'react-icons/fa';\r\nimport Header from 'components/Header/Header';\r\nimport Board from 'components/Board/Board';\r\nimport ModalInfo from 'components/ModalInfo/ModalInfo';\r\nimport ModalError from 'components/ModalError/ModalError';\r\nimport { Context, type ContextType } from 'Provider';\r\nimport Helmet from 'react-helmet';\r\nimport './Container.scss';\r\nimport CodeEditor from 'components/Editor/Editor';\r\nimport Switcher from 'components/Header/Switcher';\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst Container = () => {\r\n  const context = useContext(Context);\r\n  const { isPathExist, clear, isHelped, setIsHelped,  isCoding, setIsCoding }: ContextType = context;\r\n  const [isErrorOpen, setIsErrorOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!isPathExist) {\r\n      clear();\r\n      setIsErrorOpen(true);\r\n    }\r\n  }, [isPathExist, clear]);\r\n\r\n  const onErrorClose = () => {\r\n    setIsErrorOpen(false);\r\n  };\r\n  const onHelpClose = () => {\r\n    setIsHelped(false);\r\n  };\r\n  const onEditorClose = () => {\r\n    setIsCoding(false);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Evil Path Finder</title>\r\n        <meta property=\"og:title\" content=\"Pathfinding Visualizer\" />\r\n        <meta property=\"og:type\" content=\"website\" />\r\n\r\n      </Helmet>\r\n      <header className=\"header\">\r\n        <h1 className=\"header__title\">Evil Path Finder</h1>\r\n      </header>\r\n      <ModalError isErrorOpen={isErrorOpen} onErrorClose={onErrorClose} />\r\n      <ModalInfo isHelped={isHelped} onHelpClose={onHelpClose} />\r\n      <CodeEditor isCoding={isCoding} onEditorClose={onEditorClose} />\r\n      <Header />\r\n      <Switcher />\r\n      <Board />\r\n      <footer className=\"footer\">\r\n        <p className=\"footer__author\">Powered By SCH001 With <span style={{color:\"red\"}}>❤</span></p>\r\n        {/* <a\r\n          href=\"https://github.com/\"\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n        >\r\n          <FaGithub className=\"footer__github\" />\r\n        </a> */}\r\n      </footer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Container;\r\n","import React from 'react';\nimport { Provider } from 'Provider';\nimport Container from 'components/Container/Container';\nimport 'reset-css';\nimport './App.scss';\n\nconst App = () => {\n  return (\n    <Provider>\n      <Container />\n    </Provider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};","module.exports = __webpack_public_path__ + \"static/media/circle.539ab07e.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"visitedColor\":\"#75e1ff\",\"shortestColor\":\"#f66\",\"fixedColor\":\"#000\",\"clickedColor\":\"#FF7F24\",\"initialColor\":\"#a1a6a3\",\"boardRow\":\"16\",\"boardCol\":\"30\"};"],"sourceRoot":""}